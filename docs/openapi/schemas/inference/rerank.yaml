# Rerank API schemas

RerankRequest:
  type: object
  required:
    - model
    - query
    - documents
  properties:
    model:
      type: string
      description: Model in provider/model format
      example: cohere/rerank-v3.5
    query:
      type: string
      description: Query used to score and reorder documents
    documents:
      type: array
      description: Documents to rerank
      items:
        $ref: '#/RerankDocument'
    fallbacks:
      type: array
      items:
        type: string
      description: Fallback models in provider/model format
    top_n:
      type: integer
      minimum: 1
      description: Maximum number of ranked results to return
    max_tokens_per_doc:
      type: integer
      minimum: 1
      description: Maximum tokens to consider per document (provider-dependent)
    priority:
      type: integer
      description: Request priority hint (provider-dependent)
    return_documents:
      type: boolean
      description: Whether to include document content in each result

RerankDocument:
  type: object
  required:
    - text
  properties:
    text:
      type: string
      description: Document text content
    id:
      type: string
      description: Optional document identifier
    meta:
      type: object
      description: Optional document metadata
      additionalProperties: true

RerankResponse:
  type: object
  properties:
    id:
      type: string
    results:
      type: array
      items:
        $ref: '#/RerankResult'
    model:
      type: string
    usage:
      $ref: './usage.yaml#/BifrostLLMUsage'
    extra_fields:
      $ref: './common.yaml#/BifrostResponseExtraFields'

RerankResult:
  type: object
  required:
    - index
    - relevance_score
  properties:
    index:
      type: integer
      description: Index into the original documents array
    relevance_score:
      type: number
      description: Relevance score for this document
    document:
      $ref: '#/RerankDocument'
