(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[387],{2067:(e,t,s)=>{"use strict";s.d(t,{Dr:()=>a,MZ:()=>i,pI:()=>n,vX:()=>r});class a{isValid(){return!this.rules.some(e=>!e.isValid)}getErrors(){return this.rules.filter(e=>!e.isValid).map(e=>e.message)}getFirstError(){let e=this.rules.find(e=>!e.isValid);return null==e?void 0:e.message}static required(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"This field is required";return{isValid:null!=e&&""!==e&&0!==e,message:t}}static minValue(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Must be at least ".concat(t);return{isValid:!isNaN(e)&&e>=t,message:s}}static maxValue(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Must be at most ".concat(t);return{isValid:!isNaN(e)&&e<=t,message:s}}static pattern(e,t,s){return{isValid:t.test(e||""),message:s}}static email(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Must be a valid email";return this.pattern(e,/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,t)}static url(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Must be a valid URL";return this.pattern(e,/^https?:\/\/.+/,t)}static minLength(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Must be at least ".concat(t," characters");return{isValid:(e||"").length>=t,message:s}}static maxLength(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Must be at most ".concat(t," characters");return{isValid:(e||"").length<=t,message:s}}static arrayMinLength(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Must have at least ".concat(t," items");return{isValid:(null==e?void 0:e.length)>=t,message:s}}static arrayMaxLength(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Must have at most ".concat(t," items");return{isValid:(null==e?void 0:e.length)<=t,message:s}}static arrayUnique(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Must have unique items";return{isValid:(null==e?void 0:e.length)===new Set(e).size,message:t}}static arraysEqual(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Must be equal";return{isValid:(null==e?void 0:e.length)===(null==t?void 0:t.length)&&(null==e?void 0:e.every((e,s)=>e===t[s])),message:s}}static custom(e,t){return{isValid:e,message:t}}static all(e){return e.find(e=>!e.isValid)||{isValid:!0,message:""}}constructor(e){this.rules=e.filter(e=>void 0!==e)}}function r(e){return!!e&&(!!e.startsWith("env.")||32===e.length&&e.substring(4,28)==="*".repeat(24)||!!(e.length<=8&&/^\*+$/.test(e)))}function n(e){if(!e||!e.trim())return!1;if(r(e))return!0;if(e.startsWith("env."))return e.length>4;try{let t=JSON.parse(e);return"object"==typeof t&&null!==t&&"service_account"===t.type&&t.project_id&&t.private_key}catch(e){return!1}}function i(e){if(!e)return!1;if("object"==typeof e)return Object.keys(e).length>0;if("string"==typeof e){if(r(e))return!0;try{let t=JSON.parse(e);return"object"==typeof t&&null!==t&&Object.keys(t).length>0}catch(e){}}return!1}},3580:(e,t,s)=>{"use strict";s.d(t,{d:()=>r});var a=s(6671);function r(){return{toast:e=>{let{title:t,description:s,variant:r}=e,n=s?"".concat(t,": ").concat(s):t;"destructive"===r?a.o.error(n):a.o.success(n)}}}},3621:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>J});var a=s(5155),r=s(6559),n=s(8145),i=s(7168),l=s(8524),o=s(1886),c=s(4432),d=s(7783),u=s(4616),m=s(9803),x=s(3717),h=s(1154),p=s(2525),f=s(2115),v=s(6671),g=s(8482),j=s(9840),y=s(9852),_=s(5784),b=s(4964),N=s(4416),k=s(3999);let w=f.forwardRef((e,t)=>{let{className:s,value:r,onValueChange:i,...l}=e,[o,c]=f.useState(""),d=e=>{i(r.filter(t=>t!==e))};return(0,a.jsxs)("div",{className:(0,k.cn)("border-input flex flex-wrap items-center gap-2 rounded-md border p-2",s),children:[r.map(e=>(0,a.jsxs)(n.E,{variant:"secondary",className:"flex items-center gap-1",children:[e,(0,a.jsx)("button",{type:"button",className:"ring-offset-background focus:ring-ring cursor-pointer rounded-full outline-none focus:ring-2 focus:ring-offset-2",onClick:()=>d(e),children:(0,a.jsx)(N.A,{className:"h-3 w-3"})})]},e)),(0,a.jsx)(y.p,{ref:t,type:"text",value:o,onChange:e=>{c(e.target.value)},onKeyDown:e=>{if("Enter"===e.key||","===e.key){e.preventDefault();let t=o.trim();t&&!r.includes(t)&&i([...r,t]),c("")}else"Backspace"===e.key&&""===o&&r.length>0&&i(r.slice(0,-1))},className:"flex-1 border-0 shadow-none focus-visible:ring-0",...l})]})});w.displayName="TagInput";var C=s(7777),A=s(6034),z=s(2067),S=s(9231),E=s.n(S),P=s(1284),R=s(4869),V=s(1539),I=s(1243),O=s(4229),D=s(9026),q=s(9474),M=s(8103);let B={bedrock:{title:"AWS Bedrock Meta Config",fields:[{name:"region",label:"Region",type:"text",placeholder:"us-east-1 or env.AWS_REGION"},{name:"secret_access_key",label:"Secret Access Key (Optional)",type:"text",placeholder:"Your AWS secret access key or env.AWS_SECRET_ACCESS_KEY"},{name:"session_token",label:"Session Token (Optional)",type:"text",placeholder:"Your AWS session token or env.AWS_SESSION_TOKEN"},{name:"arn",label:"ARN (Optional)",type:"text",placeholder:"AWS ARN or env.AWS_ARN"},{name:"inference_profiles",label:"Inference Profiles (JSON format, Optional)",type:"textarea",placeholder:'{ "model-id": "profile-name" }',isJson:!0}]}},T=e=>{let{provider:t,metaConfig:s,onMetaConfigChange:r}=e,n=B[t];if(!n)return null;let i=e=>{let t=s[e.name];return"textarea"===e.type?(0,a.jsx)(q.T,{placeholder:e.placeholder,value:e.isJson?"string"==typeof t?t:JSON.stringify(t,null,2):t||"",onChange:t=>{r(e.name,t.target.value)},onBlur:t=>{if(e.isJson)try{let s=JSON.parse(t.target.value);r(e.name,s)}catch(e){}},rows:4,className:"wrap-anywhere max-w-full font-mono text-sm"}):(0,a.jsx)(y.p,{placeholder:e.placeholder,value:t||"",onChange:t=>r(e.name,t.target.value)})};return(0,a.jsxs)("div",{className:"",children:[(0,a.jsx)(g.aR,{className:"mb-2 px-0",children:(0,a.jsxs)(g.ZB,{className:"flex items-center gap-2 text-base",children:[(0,a.jsx)(M.A,{className:"h-4 w-4"}),n.title,(0,a.jsx)(C.Bc,{children:(0,a.jsxs)(C.m_,{children:[(0,a.jsx)(C.k$,{asChild:!0,children:(0,a.jsx)("span",{children:(0,a.jsx)(P.A,{className:"text-muted-foreground ml-1 h-3 w-3"})})}),(0,a.jsx)(C.ZI,{className:"max-w-fit",children:(0,a.jsxs)("p",{children:["Use ",(0,a.jsx)("code",{className:"rounded bg-neutral-100 px-1 py-0.5 text-neutral-800",children:"env.<VAR>"})," to read the value from an environment variable."]})})]})})]})}),(0,a.jsx)(g.Wu,{className:"space-y-4 px-0",children:n.fields.map(e=>(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium",children:e.label}),i(e)]},e.name))})]})},Z=(e,t)=>{let s=!e,a=(null==e?void 0:e.name)||t||"",r=!["ollama","sgl"].includes(a);return{selectedProvider:a,keys:s&&r?[(()=>{let e={id:"",value:"",models:[],weight:1};return"azure"===a?e.azure_key_config={endpoint:"",deployments:{},api_version:"2024-02-01"}:"vertex"===a&&(e.vertex_key_config={project_id:"",region:"",auth_credentials:""}),e})()]:!s&&r&&(null==e?void 0:e.keys)?e.keys:[],networkConfig:(null==e?void 0:e.network_config)||A.mR,performanceConfig:(null==e?void 0:e.concurrency_and_buffer_size)||A.qV,metaConfig:(null==e?void 0:e.meta_config)||{region:"",secret_access_key:""},proxyConfig:(null==e?void 0:e.proxy_config)||{type:"none",url:"",username:"",password:""}}};function K(e){var t,s;let r,n,{provider:l,onSave:m,onCancel:x,existingProviders:h}=e,p=l?void 0:d.xq.find(e=>!h.includes(e))||"",[g]=(0,f.useState)(Z(l,p)),[A,S]=(0,f.useState)({...g,isDirty:!1}),[M,B]=(0,f.useState)(!1),{selectedProvider:K,keys:L,networkConfig:$,performanceConfig:U,metaConfig:J,proxyConfig:W,isDirty:F}=A,H="ollama"===K||"sgl"===K,X=!["ollama","sgl"].includes(K);X&&L.every(e=>"vertex"===K||""!==e.value.trim()),X&&L.length;let Y=U.concurrency>0&&U.buffer_size>0&&U.concurrency<U.buffer_size,G=U.concurrency!==g.performanceConfig.concurrency||U.buffer_size!==g.performanceConfig.buffer_size,{valid:Q,message:ee}=(()=>{let e=!0,t="";for(let s of L)if("azure"===K&&s.azure_key_config){let a=!!s.azure_key_config.endpoint&&""!==s.azure_key_config.endpoint.trim(),r=(0,z.MZ)(s.azure_key_config.deployments);if(!a||!r){e=!1,t="Endpoint and valid Deployments (JSON object) are required for Azure keys";break}}else if("vertex"===K&&s.vertex_key_config){let a=!!s.vertex_key_config.project_id&&""!==s.vertex_key_config.project_id.trim(),r=!!s.vertex_key_config.region&&""!==s.vertex_key_config.region.trim(),n=(0,z.pI)(s.vertex_key_config.auth_credentials);if(!a||!n||!r){e=!1,t="Project ID, valid Auth Credentials (JSON object or env.VAR), and Region are required for Vertex AI keys";break}}return{valid:e,message:t}})(),{valid:et,message:es}=(r=!0,n="","bedrock"===K&&((r=!!J.region&&""!==J.region.trim())||(n="Region is required for AWS Bedrock")),{valid:r,message:n});(0,f.useEffect)(()=>{let e={selectedProvider:K,keys:X?L:[],networkConfig:$,performanceConfig:U,metaConfig:J,proxyConfig:W};S(t=>({...t,isDirty:!E()(g,e)}))},[K,L,$,U,J,W,g,X]);let ea=(e,t)=>{S(s=>({...s,[e]:t}))},er=(e,t)=>{ea("proxyConfig",{...W,[e]:t})},en=l?d.xq:d.xq.filter(e=>!h.includes(e)),ei=async e=>{if(!el.isValid())return void v.o.error(el.getFirstError());e.preventDefault(),B(!0);let t=null;if(l){let e={keys:X?L.filter(e=>"vertex"===K||""!==e.value.trim()):[],network_config:$,concurrency_and_buffer_size:U,meta_config:J,proxy_config:W};[,t]=await o.K.updateProvider(l.name,e)}else{let e={provider:K,keys:X?L.filter(e=>"vertex"===K||""!==e.value.trim()):[],network_config:$,concurrency_and_buffer_size:U,meta_config:J,proxy_config:W};[,t]=await o.K.createProvider(e)}B(!1),t?v.o.error(t):(v.o.success("Provider ".concat(l?"updated":"added"," successfully")),m())},el=new z.Dr([z.Dr.required(K,"Please select a provider"),z.Dr.custom(F,"No changes to save"),...H?[z.Dr.required($.base_url,"Base URL is required for Ollama provider"),z.Dr.pattern($.base_url||"",/^https?:\/\/.+/,"Base URL must start with http:// or https://")]:[],...X?[z.Dr.minValue(L.length,1,"At least one API key is required"),z.Dr.custom(L.every(e=>"vertex"===K||""!==e.value.trim()),"API key value cannot be empty"),z.Dr.custom(L.every(e=>e.weight>=0&&e.weight<=1),"Key weights must be between 0 and 1")]:[],z.Dr.minValue($.default_request_timeout_in_seconds,1,"Timeout must be greater than 0 seconds"),z.Dr.minValue($.max_retries,0,"Max retries cannot be negative"),z.Dr.minValue(U.concurrency,1,"Concurrency must be greater than 0"),z.Dr.minValue(U.buffer_size,1,"Buffer size must be greater than 0"),z.Dr.custom(U.concurrency<U.buffer_size,"Buffer size must be greater than concurrency"),z.Dr.custom(Q,ee),z.Dr.custom(et,es),..."bedrock"===K?[z.Dr.required(J.region,"AWS region is required")]:[]]),eo=e=>{ea("keys",L.filter((t,s)=>s!==e))},ec=(e,t,s)=>{let a=[...L],r={...a[e]};"models"===t&&Array.isArray(s)?r.models=s:"value"===t&&"string"==typeof s?r.value=s:"weight"===t&&"string"==typeof s&&(r.weight=Number.parseFloat(s)||1),a[e]=r,ea("keys",a)},ed=(e,t,s)=>{let a=[...L],r={...a[e]};r.azure_key_config||(r.azure_key_config={endpoint:"",deployments:{},api_version:"2024-02-01"}),r.azure_key_config={...r.azure_key_config,[t]:s},a[e]=r,ea("keys",a)},eu=(e,t,s)=>{let a=[...L],r={...a[e]};r.vertex_key_config||(r.vertex_key_config={project_id:"",region:"",auth_credentials:""}),r.vertex_key_config={...r.vertex_key_config,[t]:s},a[e]=r,ea("keys",a)},em=(0,f.useMemo)(()=>{let e=[];return X&&e.push({id:"api-keys",label:"API Keys"}),"bedrock"===K&&e.push({id:"meta-config",label:"Meta Config"}),e.push({id:"network",label:"Network"}),e.push({id:"performance",label:"Performance"}),e},[X,K]),[ex,eh]=(0,f.useState)((null==(t=em[0])?void 0:t.id)||"api-keys");return(0,f.useEffect)(()=>{if(!em.map(e=>e.id).includes(ex)){var e;eh((null==(e=em[0])?void 0:e.id)||"api-keys")}},[em]),(0,a.jsx)(j.lG,{open:!0,onOpenChange:x,children:(0,a.jsxs)(j.Cf,{className:"custom-scrollbar max-h-[90vh] overflow-y-auto p-0 sm:max-w-4xl",showCloseButton:!1,children:[(0,a.jsxs)(j.c7,{className:"z-10 px-6 pt-6",children:[(0,a.jsx)(j.L3,{children:l?(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,c.FO)(l.name,{size:20}),(0,a.jsx)("span",{className:"font-semibold",children:d.oU[l.name]})]}):(0,a.jsx)("div",{className:"flex items-center gap-2",children:"Add Provider"})}),(0,a.jsx)(j.rr,{children:"Configure AI provider settings, API keys, and network options."})]}),(0,a.jsxs)("form",{onSubmit:ei,className:"flex flex-row gap-2 px-6 pt-6",children:[!l&&(0,a.jsx)(C.Bc,{children:(0,a.jsx)("div",{className:"flex w-[250px] flex-col gap-1 pb-10",children:d.xq.map(e=>(0,a.jsxs)(C.m_,{children:[(0,a.jsx)(C.k$,{className:(0,k.cn)("flex w-full items-center gap-2 rounded-lg border px-4 py-2 text-sm transition-all duration-200 ease-in-out",K===e?"bg-secondary opacity-100 hover:opacity-100":en.includes(e)?"hover:bg-secondary cursor-pointer border-transparent opacity-100 hover:border":"cursor-not-allowed border-transparent opacity-30"),onClick:t=>{t.preventDefault(),en.includes(e)&&ea("selectedProvider",e)},asChild:!0,children:(0,a.jsxs)("span",{children:[(0,c.FO)(e,{size:"sm",className:"w-5 h-5"}),(0,a.jsx)("div",{className:"text-sm",children:d.oU[e]})]})}),!en.includes(e)&&(0,a.jsx)(C.ZI,{children:"Provider is already configured"})]},e))})}),(0,a.jsxs)("div",{className:"flex h-full w-full flex-col justify-between px-2",children:[(0,a.jsxs)(b.tU,{defaultValue:null==(s=em[0])?void 0:s.id,value:ex,onValueChange:eh,className:"space-y-6",children:[(0,a.jsx)(b.j7,{style:{gridTemplateColumns:"repeat(".concat(em.length,", 1fr)")},className:"mb-4 grid h-10 w-full",children:em.map(e=>(0,a.jsx)(b.Xi,{value:e.id,className:"flex items-center gap-2 transition-all duration-200 ease-in-out",children:e.label},e.id))}),(0,a.jsx)("div",{className:"relative overflow-hidden",children:(0,a.jsxs)("div",{className:"transition-all duration-300 ease-in-out",style:{maxHeight:"2000px",opacity:1},children:[X&&"api-keys"===ex&&(0,a.jsxs)("div",{className:"animate-in fade-in-0 slide-in-from-right-2 space-y-4 duration-300",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("h3",{className:"text-base font-medium",children:"API Keys"}),(0,a.jsx)(C.Bc,{children:(0,a.jsxs)(C.m_,{children:[(0,a.jsx)(C.k$,{asChild:!0,children:(0,a.jsx)("span",{children:(0,a.jsx)(P.A,{className:"text-muted-foreground ml-1 h-3 w-3"})})}),(0,a.jsx)(C.ZI,{className:"max-w-fit",children:(0,a.jsxs)("p",{children:["Use ",(0,a.jsx)("code",{className:"rounded bg-neutral-100 px-1 py-0.5 text-neutral-800",children:"env.<VAR>"})," to read the value from an environment variable."]})})]})})]}),(0,a.jsxs)(i.$,{type:"button",variant:"outline",size:"sm",onClick:()=>{let e={id:"",value:"",models:[],weight:1};"azure"===K?e.azure_key_config={endpoint:"",deployments:{},api_version:"2024-02-01"}:"vertex"===K&&(e.vertex_key_config={project_id:"",region:"",auth_credentials:""}),ea("keys",[...L,e])},children:[(0,a.jsx)(u.A,{className:"h-4 w-4"}),"Add Key"]})]}),(0,a.jsx)("div",{className:"space-y-4",children:L.map((e,t)=>{var s,r,n,l,o,c,d,u,m,x,h,p,f,v,g;return(0,a.jsxs)("div",{className:"animate-in fade-in-0 slide-in-from-right-2 space-y-4 rounded-md border p-4 duration-300",style:{animationDelay:"".concat(50*t,"ms")},children:[(0,a.jsxs)("div",{className:"flex gap-4",children:["vertex"!==K&&(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("div",{className:"text-sm font-medium",children:"API Key"}),(0,a.jsx)(y.p,{placeholder:"API Key or env.MY_KEY",value:e.value,onChange:e=>ec(t,"value",e.target.value),type:"text",className:"flex-1 transition-all duration-200 ease-in-out ".concat(X&&"vertex"!==K&&""===e.value.trim()?"border-destructive":"")})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Weight"}),(0,a.jsx)(C.Bc,{children:(0,a.jsxs)(C.m_,{children:[(0,a.jsx)(C.k$,{asChild:!0,children:(0,a.jsx)("span",{children:(0,a.jsx)(P.A,{className:"text-muted-foreground h-3 w-3"})})}),(0,a.jsx)(C.ZI,{children:(0,a.jsx)("p",{children:"Determines traffic distribution between keys. Higher weights receive more requests."})})]})})]}),(0,a.jsx)(y.p,{placeholder:"1.0",value:e.weight,onChange:e=>ec(t,"weight",e.target.value),type:"number",step:"0.01",min:"0",className:"w-20 transition-all duration-200 ease-in-out ".concat(X&&(e.weight<0||e.weight>1)?"border-destructive":"")})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Models (Optional)"}),(0,a.jsx)(C.Bc,{children:(0,a.jsxs)(C.m_,{children:[(0,a.jsx)(C.k$,{asChild:!0,children:(0,a.jsx)("span",{children:(0,a.jsx)(P.A,{className:"text-muted-foreground h-3 w-3"})})}),(0,a.jsx)(C.ZI,{children:(0,a.jsx)("p",{children:"Comma-separated list of models this key applies to. Leave blank for all models."})})]})})]}),(0,a.jsx)(w,{placeholder:"e.g. gpt-4, gpt-3.5-turbo",value:e.models||[],onValueChange:e=>ec(t,"models",e)})]}),"azure"===K&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Endpoint (Required)"}),(0,a.jsx)(y.p,{placeholder:"https://your-resource.openai.azure.com or env.AZURE_ENDPOINT",value:(null==(s=e.azure_key_config)?void 0:s.endpoint)||"",onChange:e=>ed(t,"endpoint",e.target.value),className:"transition-all duration-200 ease-in-out ".concat((null==(n=e.azure_key_config)||null==(r=n.endpoint)?void 0:r.trim())?"":"border-destructive")})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"API Version (Optional)"}),(0,a.jsx)(y.p,{placeholder:"2024-02-01 or env.AZURE_API_VERSION",value:(null==(l=e.azure_key_config)?void 0:l.api_version)||"",onChange:e=>ed(t,"api_version",e.target.value)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Deployments (Required)"}),(0,a.jsx)("div",{className:"text-muted-foreground mb-2 text-xs",children:"JSON object mapping model names to deployment names"}),(0,a.jsx)(q.T,{placeholder:'{"gpt-4": "my-gpt4-deployment", "gpt-3.5-turbo": "my-gpt35-deployment"}',value:"string"==typeof(null==(o=e.azure_key_config)?void 0:o.deployments)?e.azure_key_config.deployments:JSON.stringify((null==(c=e.azure_key_config)?void 0:c.deployments)||{},null,2),onChange:e=>{ed(t,"deployments",e.target.value)},onBlur:e=>{let s=e.target.value.trim();if(s)try{let e=JSON.parse(s);"object"==typeof e&&null!==e&&ed(t,"deployments",e)}catch(e){}},rows:3,className:"wrap-anywhere max-w-full font-mono text-sm"})]})]}),"vertex"===K&&(0,a.jsxs)("div",{className:"space-y-4 pt-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Project ID (Required)"}),(0,a.jsx)(y.p,{placeholder:"your-gcp-project-id or env.VERTEX_PROJECT_ID",value:(null==(d=e.vertex_key_config)?void 0:d.project_id)||"",onChange:e=>eu(t,"project_id",e.target.value),className:"transition-all duration-200 ease-in-out ".concat((null==(m=e.vertex_key_config)||null==(u=m.project_id)?void 0:u.trim())?"":"border-destructive")})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Region (Required)"}),(0,a.jsx)(y.p,{placeholder:"us-central1 or env.VERTEX_REGION",value:(null==(x=e.vertex_key_config)?void 0:x.region)||"",onChange:e=>eu(t,"region",e.target.value),className:"transition-all duration-200 ease-in-out ".concat((null==(p=e.vertex_key_config)||null==(h=p.region)?void 0:h.trim())?"":"border-destructive")})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Auth Credentials (Required)"}),(0,a.jsx)("div",{className:"text-muted-foreground mb-2 text-xs",children:"Service account JSON object or env.VAR_NAME"}),(0,a.jsx)(q.T,{placeholder:'{"type":"service_account","project_id":"your-gcp-project",...} or env.VERTEX_CREDENTIALS',value:(null==(f=e.vertex_key_config)?void 0:f.auth_credentials)||"",onChange:e=>{eu(t,"auth_credentials",e.target.value)},rows:4,className:"wrap-anywhere max-w-full font-mono text-sm ".concat((0,z.pI)((null==(v=e.vertex_key_config)?void 0:v.auth_credentials)||"")?"":"border-destructive")}),(0,z.vX)((null==(g=e.vertex_key_config)?void 0:g.auth_credentials)||"")&&(0,a.jsxs)("div",{className:"text-muted-foreground mt-1 flex items-center gap-1 text-xs",children:[(0,a.jsx)(P.A,{className:"h-3 w-3"}),(0,a.jsx)("span",{children:"Credentials are stored securely. Edit to update."})]})]})]}),L.length>1&&(0,a.jsxs)(i.$,{type:"button",variant:"destructive",size:"sm",onClick:()=>eo(t),className:"mt-2 transition-all duration-200 ease-in-out",children:[(0,a.jsx)(N.A,{className:"h-4 w-4"}),"Remove Key"]})]},t)})})]}),"bedrock"===K&&"meta-config"===ex&&(0,a.jsx)("div",{className:"animate-in fade-in-0 slide-in-from-right-2 duration-300",children:(0,a.jsx)(T,{provider:K,metaConfig:J,onMetaConfigChange:(e,t)=>{ea("metaConfig",{...J,[e]:t})}})}),"network"===ex&&(0,a.jsxs)("div",{className:"animate-in fade-in-0 slide-in-from-right-2 space-y-6 duration-300",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(R.A,{className:"h-4 w-4"}),(0,a.jsx)("h3",{className:"text-base font-medium",children:"Network Configuration"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"text-sm font-medium",children:["Base URL ",H?"(Required)":"(Optional)"]}),(0,a.jsx)(y.p,{placeholder:"https://api.example.com",value:$.base_url||"",onChange:e=>ea("networkConfig",{...$,base_url:e.target.value}),className:"transition-all duration-200 ease-in-out ".concat(H&&!$.base_url?"border-destructive":"")})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Timeout (seconds)"}),(0,a.jsx)(y.p,{type:"number",placeholder:"30",value:$.default_request_timeout_in_seconds,onChange:e=>ea("networkConfig",{...$,default_request_timeout_in_seconds:Number.parseInt(e.target.value)||30}),className:"transition-all duration-200 ease-in-out"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Max Retries"}),(0,a.jsx)(y.p,{type:"number",placeholder:"0",value:$.max_retries,onChange:e=>ea("networkConfig",{...$,max_retries:Number.parseInt(e.target.value)||0}),className:"transition-all duration-200 ease-in-out"})]})]})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(R.A,{className:"h-4 w-4"}),(0,a.jsx)("h3",{className:"text-base font-medium",children:"Proxy Settings"})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Proxy Type"}),(0,a.jsxs)(_.l6,{value:W.type,onValueChange:e=>er("type",e),children:[(0,a.jsx)(_.bq,{className:"w-48 transition-all duration-200 ease-in-out",children:(0,a.jsx)(_.yv,{placeholder:"Select type"})}),(0,a.jsxs)(_.gC,{children:[(0,a.jsx)(_.eb,{value:"none",children:"None"}),(0,a.jsx)(_.eb,{value:"http",children:"HTTP"}),(0,a.jsx)(_.eb,{value:"socks5",children:"SOCKS5"}),(0,a.jsx)(_.eb,{value:"environment",children:"Environment"})]})]})]}),(0,a.jsx)("div",{className:"overflow-hidden transition-all duration-300 ease-in-out",style:{maxHeight:"none"!==W.type&&"environment"!==W.type?"300px":"0px",opacity:+("none"!==W.type&&"environment"!==W.type)},children:(0,a.jsxs)("div",{className:"space-y-4 pt-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Proxy URL"}),(0,a.jsx)(y.p,{placeholder:"http://proxy.example.com",value:W.url||"",onChange:e=>er("url",e.target.value),className:"transition-all duration-200 ease-in-out"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Username"}),(0,a.jsx)(y.p,{value:W.username||"",onChange:e=>er("username",e.target.value),placeholder:"Proxy username",className:"transition-all duration-200 ease-in-out"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Password"}),(0,a.jsx)(y.p,{type:"password",value:W.password||"",onChange:e=>er("password",e.target.value),placeholder:"Proxy password",className:"transition-all duration-200 ease-in-out"})]})]})]})})]})]})]}),"performance"===ex&&(0,a.jsxs)("div",{className:"animate-in fade-in-0 slide-in-from-right-2 space-y-2 duration-300",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(V.A,{className:"h-4 w-4"}),(0,a.jsx)("h3",{className:"text-base font-medium",children:"Performance Settings"})]}),(0,a.jsx)("div",{className:"overflow-hidden transition-all duration-300 ease-in-out",style:{maxHeight:G?"200px":"0px",opacity:+!!G},children:(0,a.jsxs)(D.Fc,{className:"mb-4",children:[(0,a.jsx)(I.A,{className:"h-4 w-4"}),(0,a.jsxs)(D.TN,{children:[(0,a.jsx)("strong",{children:"Heads up:"})," Changing concurrency or buffer size may temporarily affect request latency for this provider while the new settings are being applied."]})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Concurrency"}),(0,a.jsx)(y.p,{type:"number",value:U.concurrency,onChange:e=>ea("performanceConfig",{...U,concurrency:Number.parseInt(e.target.value)||0}),className:"transition-all duration-200 ease-in-out ".concat(Y?"":"border-destructive")})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Buffer Size"}),(0,a.jsx)(y.p,{type:"number",value:U.buffer_size,onChange:e=>ea("performanceConfig",{...U,buffer_size:Number.parseInt(e.target.value)||0}),className:"transition-all duration-200 ease-in-out ".concat(Y?"":"border-destructive")})]})]})]})]})})]}),(0,a.jsx)("div",{className:"bg-background sticky bottom-0 py-3",children:en.length>0&&(0,a.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,a.jsx)(i.$,{type:"button",variant:"outline",onClick:x,className:"transition-all duration-200 ease-in-out",children:"Cancel"}),(0,a.jsx)(C.Bc,{children:(0,a.jsxs)(C.m_,{children:[(0,a.jsx)(C.k$,{asChild:!0,children:(0,a.jsx)("span",{children:(0,a.jsxs)(i.$,{type:"submit",disabled:!el.isValid()||M,isLoading:M,className:"transition-all duration-200 ease-in-out",children:[(0,a.jsx)(O.A,{className:"h-4 w-4"}),M?"Saving...":"Save Provider"]})})}),(!el.isValid()||M)&&(0,a.jsx)(C.ZI,{children:(0,a.jsx)("p",{children:M?"Saving...":el.getFirstError()||"Please fix validation errors"})})]})})]})})]})]})]})})}function L(e){let{providers:t,onRefresh:s}=e,[j,y]=(0,f.useState)(!1),[_,b]=(0,f.useState)(null),[N,k]=(0,f.useState)(null),w=async e=>{k(e);let[,t]=await o.K.deleteProvider(e);k(null),t?v.o.error(t):(v.o.success("Provider deleted successfully"),s())},C=e=>{b(e),y(!0)};return(0,a.jsxs)(a.Fragment,{children:[j&&(0,a.jsx)(K,{provider:_,onSave:()=>{y(!1),b(null),s()},onCancel:()=>y(!1),existingProviders:t.map(e=>e.name)}),(0,a.jsxs)(g.aR,{className:"mb-4 px-0",children:[(0,a.jsxs)(g.ZB,{className:"flex items-center justify-between",children:[(0,a.jsx)("div",{className:"flex items-center gap-2",children:"AI Providers"}),(0,a.jsxs)(i.$,{onClick:()=>{b(null),y(!0)},children:[(0,a.jsx)(u.A,{className:"h-4 w-4"}),"Add Provider"]})]}),(0,a.jsx)(g.BT,{children:"Manage AI model providers, their API keys, and configuration settings."})]}),(0,a.jsx)("div",{className:"rounded-md border",children:(0,a.jsxs)(l.XI,{children:[(0,a.jsx)(l.A0,{children:(0,a.jsxs)(l.Hj,{children:[(0,a.jsx)(l.nd,{children:"Provider"}),(0,a.jsx)(l.nd,{children:"Concurrency"}),(0,a.jsx)(l.nd,{children:"Buffer Size"}),(0,a.jsx)(l.nd,{children:"Max Retries"}),(0,a.jsx)(l.nd,{children:"API Keys"}),(0,a.jsx)(l.nd,{className:"text-right",children:"Actions"})]})}),(0,a.jsxs)(l.BF,{children:[0===t.length&&(0,a.jsx)(l.Hj,{children:(0,a.jsx)(l.nA,{colSpan:6,className:"py-6 text-center",children:"No providers found."})}),t.map(e=>{var t,s,o,u;return(0,a.jsxs)(l.Hj,{children:[(0,a.jsx)(l.nA,{children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,c.FO)(e.name,{size:16}),(0,a.jsx)("p",{className:"font-medium",children:d.oU[e.name]||e.name})]})}),(0,a.jsx)(l.nA,{children:(0,a.jsx)("div",{className:"flex items-center space-x-2",children:(0,a.jsx)(n.E,{variant:"outline",children:(null==(t=e.concurrency_and_buffer_size)?void 0:t.concurrency)||1})})}),(0,a.jsx)(l.nA,{children:(0,a.jsx)("div",{className:"flex items-center space-x-2",children:(0,a.jsx)(n.E,{variant:"outline",children:(null==(s=e.concurrency_and_buffer_size)?void 0:s.buffer_size)||10})})}),(0,a.jsx)(l.nA,{children:(0,a.jsx)("div",{className:"flex items-center space-x-2",children:(0,a.jsx)(n.E,{variant:"outline",children:(null==(o=e.network_config)?void 0:o.max_retries)||0})})}),(0,a.jsx)(l.nA,{children:(0,a.jsx)("div",{className:"flex items-center space-x-2",children:"ollama"!==e.name?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(m.A,{className:"text-muted-foreground h-4 w-4"}),(0,a.jsxs)("span",{className:"text-sm",children:[(null==(u=e.keys)?void 0:u.length)||0," keys"]})]}):(0,a.jsx)("span",{className:"text-sm",children:"N/A"})})}),(0,a.jsx)(l.nA,{className:"text-right",children:(0,a.jsxs)("div",{className:"flex items-center justify-end space-x-2",children:[(0,a.jsx)(i.$,{variant:"outline",size:"sm",onClick:()=>C(e),children:(0,a.jsx)(x.A,{className:"h-4 w-4"})}),(0,a.jsxs)(r.Lt,{children:[(0,a.jsx)(r.tv,{asChild:!0,children:(0,a.jsx)(i.$,{variant:"outline",size:"sm",disabled:N===e.name,children:N===e.name?(0,a.jsx)(h.A,{className:"h-4 w-4 animate-spin"}):(0,a.jsx)(p.A,{className:"h-4 w-4"})})}),(0,a.jsxs)(r.EO,{children:[(0,a.jsxs)(r.wd,{children:[(0,a.jsx)(r.r7,{children:"Delete Provider"}),(0,a.jsxs)(r.$v,{children:["Are you sure you want to delete provider ",e.name,"? This action cannot be undone."]})]}),(0,a.jsxs)(r.ck,{children:[(0,a.jsx)(r.Zr,{children:"Cancel"}),(0,a.jsx)(r.Rx,{onClick:()=>w(e.name),children:"Delete"})]})]})]})]})})]},e.name)})]})]})})]})}var $=s(2384),U=s(3580);function J(){let[e,t]=(0,f.useState)(!0),[s,r]=(0,f.useState)([]),{toast:n}=(0,U.d)();(0,f.useEffect)(()=>{i()},[]);let i=async()=>{let[e,s]=await o.K.getProviders();if(t(!1),s)return void n({title:"Error",description:s,variant:"destructive"});r((null==e?void 0:e.providers)||[])};return(0,a.jsx)("div",{children:e?(0,a.jsx)($.A,{}):(0,a.jsx)(L,{providers:s,onRefresh:i})})}},6034:(e,t,s)=>{"use strict";s.d(t,{Dk:()=>n,mR:()=>a,qV:()=>r});let a={base_url:"",default_request_timeout_in_seconds:30,max_retries:0,retry_backoff_initial:1e3,retry_backoff_max:1e4},r={concurrency:10,buffer_size:100},n={connected:"bg-green-100 text-green-800",error:"bg-red-100 text-red-800",disconnected:"bg-gray-100 text-gray-800"}},6559:(e,t,s)=>{"use strict";s.d(t,{$v:()=>p,EO:()=>u,Lt:()=>l,Rx:()=>f,Zr:()=>v,ck:()=>x,r7:()=>h,tv:()=>o,wd:()=>m});var a=s(5155);s(2115);var r=s(7649),n=s(3999),i=s(7168);function l(e){let{...t}=e;return(0,a.jsx)(r.bL,{"data-slot":"alert-dialog",...t})}function o(e){let{...t}=e;return(0,a.jsx)(r.l9,{"data-slot":"alert-dialog-trigger",...t})}function c(e){let{...t}=e;return(0,a.jsx)(r.ZL,{"data-slot":"alert-dialog-portal",...t})}function d(e){let{className:t,...s}=e;return(0,a.jsx)(r.hJ,{"data-slot":"alert-dialog-overlay",className:(0,n.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...s})}function u(e){let{className:t,...s}=e;return(0,a.jsxs)(c,{children:[(0,a.jsx)(d,{}),(0,a.jsx)(r.UC,{"data-slot":"alert-dialog-content",className:(0,n.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...s})]})}function m(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"alert-dialog-header",className:(0,n.cn)("flex flex-col gap-2 text-center sm:text-left",t),...s})}function x(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"alert-dialog-footer",className:(0,n.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",t),...s})}function h(e){let{className:t,...s}=e;return(0,a.jsx)(r.hE,{"data-slot":"alert-dialog-title",className:(0,n.cn)("text-lg font-semibold",t),...s})}function p(e){let{className:t,...s}=e;return(0,a.jsx)(r.VY,{"data-slot":"alert-dialog-description",className:(0,n.cn)("text-muted-foreground text-sm",t),...s})}function f(e){let{className:t,...s}=e;return(0,a.jsx)(r.rc,{className:(0,n.cn)((0,i.r)({variant:"destructive"}),t),...s})}function v(e){let{className:t,...s}=e;return(0,a.jsx)(r.ZD,{className:(0,n.cn)((0,i.r)({variant:"outline"}),t),...s})}},7777:(e,t,s)=>{"use strict";s.d(t,{Bc:()=>i,ZI:()=>c,k$:()=>o,m_:()=>l});var a=s(5155);s(2115);var r=s(9613),n=s(3999);function i(e){let{delayDuration:t=0,...s}=e;return(0,a.jsx)(r.Kq,{"data-slot":"tooltip-provider",delayDuration:t,...s})}function l(e){let{...t}=e;return(0,a.jsx)(i,{children:(0,a.jsx)(r.bL,{"data-slot":"tooltip",...t})})}function o(e){let{...t}=e;return(0,a.jsx)(r.l9,{"data-slot":"tooltip-trigger",...t})}function c(e){let{className:t,sideOffset:s=0,children:i,...l}=e;return(0,a.jsx)(r.ZL,{children:(0,a.jsxs)(r.UC,{"data-slot":"tooltip-content",sideOffset:s,className:(0,n.cn)("bg-primary text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",t),...l,children:[i,(0,a.jsx)(r.i3,{className:"bg-primary fill-primary z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]})})}},9385:(e,t,s)=>{Promise.resolve().then(s.bind(s,3621))},9474:(e,t,s)=>{"use strict";s.d(t,{T:()=>n});var a=s(5155);s(2115);var r=s(3999);function n(e){let{className:t,...s}=e;return(0,a.jsx)("textarea",{"data-slot":"textarea",className:(0,r.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),...s})}}},e=>{var t=t=>e(e.s=t);e.O(0,[106,189,944,231,412,62,822,613,925,915,830,441,684,358],()=>t(9385)),_N_E=e.O()}]);